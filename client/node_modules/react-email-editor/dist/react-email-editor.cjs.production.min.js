"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),n=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var a=[],l=!1,o=function(){if(l)for(var e;e=a.shift();)e()},c=0;exports.default=n.forwardRef((function(e,i){var u=e.onLoad,s=e.onReady,d=e.scriptUrl,f=e.minHeight,p=void 0===f?500:f,v=e.style,b=void 0===v?{}:v,g=t.useRef(e.editorId||"editor-"+ ++c),m=t.useRef(!1),y=t.useState(null),h=y[0],k=y[1],j=t.useCallback((function(){if(!m.current){m.current=!0;var t=e.options||{};e.projectId&&(t.projectId=e.projectId),e.tools&&(t.tools=e.tools),e.appearance&&(t.appearance=e.appearance),e.locale&&(t.locale=e.locale),k(unlayer.createEditor(r({},t,{id:g.current,displayMode:"email",source:{name:"react-email-editor",version:"1.7.6"}})))}}),[g.current,e.appearance,e.locale,e.options,e.projectId,e.tools]),C=t.useCallback((function(e,t){null==h||h.addEventListener(e,t)}),[h]),E=t.useCallback((function(e,t){null==h||h.registerCallback(e,t)}),[h]),x=t.useCallback((function(e){null==h||h.loadDesign(e)}),[h]),I=t.useCallback((function(e){null==h||h.saveDesign(e)}),[h]),O=t.useCallback((function(e,t){null==h||h.exportHtml(e,t)}),[h]),H=t.useCallback((function(e){null==h||h.setMergeTags(e)}),[h]),L=t.useCallback((function(e){null==h||h.loadBlank(e)}),[h]);return t.useEffect((function(){!function(e,t){if(void 0===t&&(t="https://editor.unlayer.com/embed.js?2"),function(e){a.push(e)}(e),function(e){var t=document.querySelectorAll("script"),n=!1;return t.forEach((function(t){t.src.includes(e)&&(n=!0)})),n}(t))o();else{var n=document.createElement("script");n.setAttribute("src",t),n.onload=function(){l=!0,o()},document.head.appendChild(n)}}(j,d)}),[j,d]),t.useEffect((function(){if(h){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=n[t],a=r[0],l=r[1];/^on/.test(a)&&"onLoad"!==a&&"onReady"!==a&&C(a,l)}u&&u(),s&&h.addEventListener("editor:ready",s)}}),[h,C,u,s,e]),t.useImperativeHandle(i,(function(){return{saveDesign:I,exportHtml:O,setMergeTags:H,editor:h,loadDesign:x,registerCallback:E,addEventListener:C,loadBlank:L}}),[I,O,H,h,x,E,C,L]),n.createElement("div",{style:{flex:1,display:"flex",minHeight:p}},n.createElement("div",{id:g.current,style:r({},b,{flex:1})}))}));
//# sourceMappingURL=react-email-editor.cjs.production.min.js.map
